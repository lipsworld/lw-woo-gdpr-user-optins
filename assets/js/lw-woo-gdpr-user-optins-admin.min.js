function clearNewFieldInputs(){jQuery(".lw-woo-gdpr-user-optins-new-fields-row #lw-woo-gdpr-user-optin-required-new").prop("checked",!1),jQuery(".lw-woo-gdpr-user-optins-new-fields-row #lw-woo-gdpr-user-optin-title-new").val(""),jQuery(".lw-woo-gdpr-user-optins-new-fields-row #lw-woo-gdpr-user-optin-label-new").val("")}jQuery(document).ready(function(e){e.fn.divExists=function(e){var o=[].slice.call(arguments,1);return this.length&&e.call(this,o),this};var o,r="form#mainform",t="table.lw-woo-gdpr-user-optins-list-table-wrap",n="table.lw-woo-gdpr-user-optins-list-table-wrap tbody";e(t).divExists(function(){e(n).sortable({handle:".lw-woo-gdpr-user-optins-field-trigger-icon",update:function(o,r){var t={action:"lw_woo_gdpr_optins_sort",sorted:e(n).sortable("toArray",{attribute:"data-key"})};jQuery.post(ajaxurl,t)}})}),e(r).on("click","button",function(){o=!!e(this).hasClass("lw-woo-gdpr-user-optin-add-new-button")}),e(r).submit(function(r){if(!0===o){r.preventDefault(),e(".woo-nav-tab-wrapper a").off();var t=e("input#lw_woo_gdpr_new_optin_nonce").val();if(""===t||void 0===t)return!1;var i={action:"lw_woo_gdpr_optins_add_new",required:e("input#lw-woo-gdpr-user-optin-required-new").is(":checked"),title:e("input#lw-woo-gdpr-user-optin-title-new").val(),label:e("input#lw-woo-gdpr-user-optin-label-new").val(),nonce:t};jQuery.post(ajaxurl,i,function(o){if(!0!==o.success)return!1;""!==o.data.markup&&(clearNewFieldInputs(),e("table#lw-woo-gdpr-user-optins-list-table tr:last").after(o.data.markup),e(n).sortable("refreshPositions"))},"json")}}),e(t).on("click","a.lw-woo-gdpr-user-optins-field-trigger-trash",function(o){o.preventDefault();var r=e(this).parents("tr.lw-woo-gdpr-user-optins-single-row"),i=e(this).data("field-id"),s=e(this).data("nonce");if(""===s||void 0===s)return!1;if(""===i||void 0===i)return!1;var l={action:"lw_woo_gdpr_optins_delete_row",field_id:i,nonce:s};jQuery.post(ajaxurl,l,function(o){if(!0!==o.success)return!1;!0!==o.success&&"true"!==o.success||(e(t).find(r).fadeOut().remove(),e(n).sortable("refreshPositions"))},"json")})});